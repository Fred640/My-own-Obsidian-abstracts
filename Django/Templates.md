Это файлы, которые определяют структуру веб страницы, позволяя отделить логику приложения от его представления.
Чтобы добавить шаблон, нужно в каталоге приложения создать каталог templates в ней подкаталог с именем приложения и в этом каталоги создавать html документы.
`<appName>/templates/<appName>/index.html`
Это нужно чтобы шаблоны разных приложений могли иметь одинаковые название например index.html. Таким образом к шаблонам нужно будет обращаться `<appName>/template.html` - благодаря этому они не будут путаться.

Для отрисовки шаблонов в функции представления нужно использовать метод render

```
#<appName>/views.py
from django.shortcuts import render
def index(request):
	return render(request, '<appName>/index.html')
```

шаблоны могу принимать переменные из функции представления таким образом
```
#<appName>/templates/<appName>/template.html
<div>{{ title }}</div>
```

```
#<appName>/views.py
def index(request):
	data = {"title": "Index Page"}
	return render(request, '<appName>/index.html', data)
```

#### #Фильтры 
к переменным в шаблонах можно применять фильтры для их **изменения** следующим образом:
`<div id="root">{{ title }} <br> {{ count|add:"39" }} </div>`
`{{ VariableName|filterName: "parameter(if exist)" }}`

#### Стандартные фильтры
```
add - прибавляет два значения или конкатенирует строки
addslashes - экранирует специальные символы с обратным слешем в строке
capfirst - делает первую букву строки заглавной
center - выравнивает строку по центру заданной ширины
cut - удаляет все вхождения подстроки из строки
date - форматирует дату или время
default - возвращает значение по умолчанию, если переменная не определена или пустая
default_if_none - возвращает значение по умолчанию, если переменная равна None
dictsort - сортирует словарь по ключам
dictsortreversed - сортирует словарь по ключам в обратном порядке
divisibleby - проверяет, делится ли число на заданный делитель
escape - экранирует специальные символы HTML в строке
escapejs - экранирует специальные символы JavaScript в строке
filesizeformat - форматирует размер файла в удобочитаемом виде
first - возвращает первый элемент списка или первый символ строки
floatformat - форматирует число с фиксированной точностью
force_escape - экранирует специальные символы HTML в строке, игнорируя возможные теги
get_digit - возвращает цифру заданного разряда числа
iriencode - кодирует URL в соответствии со стандартами Internationalized Resource Identifier (IRI)
join - объединяет строки или элементы списка в одну строку
json_script - преобразует объект Python в JSON и оборачивает его в тег <script>
last - возвращает последний элемент списка или последний символ строки
length - возвращает длину строки или количество элементов в списке
length_is - проверяет, имеет ли объект заданную длину
linebreaks - заменяет переводы строк на HTML-теги <p>
linebreaksbr - заменяет переводы строк на HTML-теги <br>
linenumbers - добавляет номера строк к каждой строке текста
ljust - выравнивает строку по левому краю заданной ширины
lower - приводит строку к нижнему регистру
make_list - преобразует аргумент в список
phone2numeric - преобразует буквенно-цифровой номер телефона в числовой формат
pluralize - возвращает единственное или множественное число для существительного на основе заданного числа
pprint - форматирует и выводит структурированный вывод объекта Python
random - возвращает случайный элемент из списка или строку
rjust - выравнивает строку по правому краю с заданной шириной
safe - помечает строку как безопасную для рендеринга
safeseq - помечает последовательность как безопасную для рендеринга
safeseq - помечает последовательность как безопасную для рендеринга
slugify - преобразует строку в URL-подобный слаг
stringformat - форматирует строку с использованием заданных параметров форматирования
striptags - удаляет все HTML- и XML-теги из строки
time - форматирует время в соответствии с заданным форматом
timesince - возвращает время, прошедшее с указанной даты до текущего момента
timeuntil - возвращает время, оставшееся до указанной даты от текущего момента
title - преобразует строку, делая заглавными первые буквы каждого слова
truncatechars - обрезает строку до указанного числа символов
truncatechars_html - обрезает HTML-строку до указанного числа символов
truncatewords - обрезает строку до указанного числа слов
truncatewords_html - обрезает HTML-строку до указанного числа слов
unordered_list - преобразует список или последовательность в маркированный HTML-список
upper - приводит строку к верхнему регистру
urlencode - кодирует строку в формате URL
urlize - преобразует URL-ссылки в HTML-ссылки
urlizetrunc - преобразует URL-ссылки в HTML-ссылки, обрезая их для сокращения длины
wordcount - возвращает количество слов в строке
wordwrap - разбивает строку на строки заданной длины
yesno - заменяет булево значение на заданную строку в зависимости от него
```



#Теги_шаблонов

#### Цикл for
```
<ul>
{% for post in posts %}
	<li>
		{{ post.title }}
	
	{{ post.body }}
	</li>
{% endfor %}
</ul>
```

В теле цикла For доступен объект forloop c свойствами
```
forloop.counter - номер итерации цикла начиная с 1 а не 0
forloop.counter0 - номер итерации цикла начиная с 0
forloop.revcounter - номер итерации считая от конца начианя с 1 а не 0
forloop.revcounter0  - номер итерации цикла считая от конца начиная с 0
forloop.first - принимает значение True на первой итерации цикла
forloop.last - принимает  значение True на последней итерации цикла
forloop.parrent - обращение к родительскому циклу если есть
```
Тег for может содержать необязательный параметр empty тело которого отображается если for проходит по пустому списку
```
<ul>
{% for i in list %}
    <li>{{ i.name }}</li>
{% empty %}
    <li>Empty list.</li>
{% endfor %}
</ul>
```
#### Условия
```
{% if forloop.first %}
	<div>last</div>
{% elif forloop.first %}
	<div>first</div>
{% else %}
	<div>asd</div>
{% endfor %}
```
Все условные операторы описываются так же как и в обычном python
параметрам можно применять #Фильтры

#### Cycle
```
#выдает один из своих аргументов каждый раз когда встречается этот тег 
{% for i in count %}
	<tr class={% cycle "row1" "row2" %}>
		...
	</tr>
{% endfor %}
```


#### Debug
Если в settings.py переменная debug = True то
```
{% debug %} - выведет очень много отладочной информации
```

####  include
этот тег расширяет html документ добавляя к нему еще один
```
dir1/
    template.html
    base2.html
    my/
        base3.html
base1.htm
```

```
{% include "./base2.html" %}
{% include "../base1.html" %}
{% include "./my/base3.html" %}
```

в теге include можно дописывать переменные которые будут использоваться в импортируемом шаблоне
```
{% include "name_snippet.html" with person="Jane" greeting="Hello" %}
```


#### firstof
Возвращает первое из переданных значений которое не будет равно False
```
{firstof var1, var2, var3}

все равно что

{% if var1 %}
    {{ var1 }}
{% elif var2 %}
    {{ var2 }}
{% elif var3 %}
    {{ var3 }}
{% endif %}
```

#### block and extends
[[Наследование шаблонов]]

#### autoescape
Позволяет защитить сайт от XXS. То есть защита сайта от запуска пользователем js скриптов через вводимые переменные.
```
{% autoescape on %}
    Hello {{ name }}
{% endautoescape %}
```
Таким образом если пользователь ввел свое имя как js скрипт то он не будет запущен.



#### now
отобразит текущую дату и/или время в указанном формате
```
{% now "jS \o\f F" %}
```

#### regroup
Перегруппировывает список объектов по заданному свойству
```
cities = [
    {"name": "Mumbai", "population": "19,000,000", "country": "India"},
    {"name": "Calcutta", "population": "15,000,000", "country": "India"},
    {"name": "New York", "population": "20,000,000", "country": "USA"},
    {"name": "Chicago", "population": "7,000,000", "country": "USA"},
    {"name": "Tokyo", "population": "33,000,000", "country": "Japan"},
]
```

```
{% regroup cities by country as country_list %}

<ul>
{% for country in country_list %}
    <li>{{ country.grouper }}
    <ul>
        {% for city in country.list %}
          <li>{{ city.name }}: {{ city.population }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul>
```

```
- India
    
    - Mumbai: 19,000,000
        
    - Calcutta: 15,000,000
        
- USA
    
    - New York: 20,000,000
        
    - Chicago: 7,000,000
        
- Japan
    
    - Tokyo: 33,000,000
```

#### spaceless
Удаляет пробелы и табуляции между html тегами
```
{% spaceless %}
    <p>
        <a>asd</a>
    </p>
{% endspaceless %}
```
вернет:
```
<p><a href="foo/">Foo</a></p
```
