Существуют стандартные теги шаблонов:
#### Цикл for
```
<ul>
{% for post in posts %}
	<li>
		{{ post.title }}
	
	{{ post.body }}
	</li>
{% endfor %}
</ul>
```

В теле цикла For доступен объект forloop c свойствами
```
forloop.counter - номер итерации цикла начиная с 1 а не 0
forloop.counter0 - номер итерации цикла начиная с 0
forloop.revcounter - номер итерации считая от конца начианя с 1 а не 0
forloop.revcounter0  - номер итерации цикла считая от конца начиная с 0
forloop.first - принимает значение True на первой итерации цикла
forloop.last - принимает  значение True на последней итерации цикла
forloop.parrent - обращение к родительскому циклу если есть
```
Тег for может содержать необязательный параметр empty тело которого отображается если for проходит по пустому списку
```
<ul>
{% for i in list %}
    <li>{{ i.name }}</li>
{% empty %}
    <li>Empty list.</li>
{% endfor %}
</ul>
```
#### Условия
```
{% if forloop.first %}
	<div>last</div>
{% elif forloop.first %}
	<div>first</div>
{% else %}
	<div>asd</div>
{% endfor %}
```
Все условные операторы описываются так же как и в обычном python
параметрам можно применять #Фильтры

#### Cycle
```
#выдает один из своих аргументов каждый раз когда встречается этот тег 
{% for i in count %}
	<tr class={% cycle "row1" "row2" %}>
		...
	</tr>
{% endfor %}
```


#### Debug
Если в settings.py переменная debug = True то
```
{% debug %} - выведет очень много отладочной информации
```

####  include
этот тег расширяет html документ добавляя к нему еще один
```
dir1/
    template.html
    base2.html
    my/
        base3.html
base1.htm
```

```
{% include "./base2.html" %}
{% include "../base1.html" %}
{% include "./my/base3.html" %}
```

в теге include можно дописывать переменные которые будут использоваться в импортируемом шаблоне
```
{% include "name_snippet.html" with person="Jane" greeting="Hello" %}
```


#### firstof
Возвращает первое из переданных значений которое не будет равно False
```
{firstof var1, var2, var3}

все равно что

{% if var1 %}
    {{ var1 }}
{% elif var2 %}
    {{ var2 }}авлено
{% elif var3 %}
    {{ var3 }}
{% endif %}
```

#### block and extends
[[Наследование шаблонов]]

#### autoescape
Позволяет защитить сайт от XXS. То есть защита сайта от запуска пользователем js скриптов через вводимые переменные.
```
{% autoescape on %}
    Hello {{ name }}
{% endautoescape %}
```
Таким образом если пользователь ввел свое имя как js скрипт то он не будет запущен.



#### now
отобразит текущую дату и/или время в указанном формате
```
{% now "jS \o\f F" %}
```

#### regroup
Перегруппировывает список объектов по заданному свойству
```
cities = [
    {"name": "Mumbai", "population": "19,000,000", "country": "India"},
    {"name": "Calcutta", "population": "15,000,000", "country": "India"},
    {"name": "New York", "population": "20,000,000", "country": "USA"},
    {"name": "Chicago", "population": "7,000,000", "country": "USA"},
    {"name": "Tokyo", "population": "33,000,000", "country": "Japan"},
]
```

```
{% regroup cities by country as country_list %}

<ul>
{% for country in country_list %}
    <li>{{ country.grouper }}
    <ul>
        {% for city in country.list %}
          <li>{{ city.name }}: {{ city.population }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul>
```

```
- India
    
    - Mumbai: 19,000,000
        
    - Calcutta: 15,000,000
        
- USA
    
    - New York: 20,000,000
        
    - Chicago: 7,000,000
        
- Japan
    
    - Tokyo: 33,000,000
```

#### spaceless
Удаляет пробелы и табуляции между html тегами
```
{% spaceless %}
    <p>
        <a>asd</a>
    </p>
{% endspaceless %}
```
вернет:
```
<p><a href="foo/">Foo</a></p
```


#### url
сгенерирует href для ссылки 
Принимает имя маршрута и аргументы
`{% url 'url_name' arg1 arg2%}`
```
<a href="{% url 'post' post.id %}">Чиатать</a>      =>  post/3/
```



Можно создавать свои кастомные теги шаблонов
Теги шаблонов бывают `simple_tag` и `inclusion_tag`
`simple_tag` - возвращает данные
`inclusion_tag` - возвращает шаблон с данными
Для создания тегов нужно в каталоге приложения `<AppName>` нужно создать подкаталог `templatetags` в нем должен быть `__init__.py` и `<TagsFile>.py` в котором будут храниться созданные теги
Создание `simple_tag`
```
from django import template
import <AppName>.views as views

register = template.Library()

@register.simple_tag()        #регистриуем тег и указываем его вид
def get_categories():
	return views.cats_db
```
Создание `inclusion_tag`
```
@register.inclusion_tag('people/listCategories.hmtl')   #указываем путь к шаблону
def show_categories():
	cats = views.cats_db
	return {"cats":cats}                                 #передаем данные в шаблон
```
